{% extends "admin/base.html" %}
{% block title %}:) | admin{% endblock %}
{% block content %}
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  <table class="sortable highlight bordered centered responsive-table">
    <thead>
      <th class="">Title</th>
      <th class="">Created</th>
      <th class="">Archived</th>
      <th class="sorttable_nosort">Actions</th>
    </thead>
    <tbody>
      {% if posts %}
        {% for post in posts %}
          <tr>
            <th class=""><a href="{{ url_for('admin.edit', slug=post.slug) }}">{{ post.title }}</a></th>
            <td class="">{{ post.created_at.strftime('%Y-%m-%d') }}
              {% if post.post_author %}by {{ post.post_author.username }}{% endif %}
            </td>
            <td class="">{{ post.archived_at.strftime('%Y-%m-%d') if post.archived_at else '-' }}</td>
            <td class="">
              <a href="{{ url_for('admin.edit', slug=post.slug) }}" class="btn primary"><i class="large material-icons">mode_edit</i></a>
              <a target="_blank" href="{{ url_for('posts.detail', slug=post.slug) }}" class="btn primary"><i class="large material-icons">visibility</i></a>
              <a href="" class="btn primary"><i class="large material-icons">comment</i></a>
            </td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><th colspan="4" class="center">no posts to display</th></tr>
      {% endif %}
    </tbody>
  </table>
{% endblock %}

{% block js_footer %}
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
{% endblock %}